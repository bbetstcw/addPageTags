
<properties
pageTitle="Azure 存储冗余选项 | MicrosoftAzure"
description="始终复制 Windows Azure 存储帐户中的数据以确保持久性和高可用性。了解 Azure 存储帐户的复制选项。"
services="storage"
documentationCenter=""
authors="tamram"
manager="adinah"
editor=""
/>

<tags ms.service="storage" ms.date="03/20/2015" wacn.date="04/11/2015"/>

# Azure 存储冗余选项



始终复制 Windows Azure 存储帐户中的数据以确保持久性和高可用性，并且即使在遇到临时硬件故障时也符合 [Azure 存储 SLA](/support/legal/sla) 要求。创建存储帐户时，必须选择以下复制选项之一：  

- **本地冗余存储 (LRS)。**本地冗余存储维护你的数据的三个副本。LRS 将在单个区域中的单个设施内复制三次。LRS 可以保护你的数据免受普通的硬件故障损害，但无法保护你的数据免受单个设施故障损害。
  
LRS 以折扣价格提供。为获得最大持久性，我们建议你使用下文所述的地域冗余存储。


- **区域冗余存储 (ZRS)。**区域冗余存储维护你的数据的三个副本。ZRS 在两到三个设施之间复制三次（在单个区域内或两个区域之间），提供比 LRS 更高的持久性。ZRS 在单个区域内确保你的数据持久保存。
ZRS 提供比 LRS 更高级别的持久性；不过，为获得最大持久性，我们建议你使用下文所述的地域冗余存储。  

	> [AZURE.NOTE] ZRS 当前仅可用于块 Blob。  
	> 在创建存储帐户并选择区域冗余复制后，你无法将其转换为使用任何其他类型的复制，反之亦然。
 


- **地域冗余存储 (GRS)**。默认情况下，在你创建存储帐户时便为存储帐户启用了地域冗余存储。GRS 维护你的数据的六个副本。使用 GRS 时，你的数据将在主区域内复制三次，并且还在离主区域数百英里的辅助区域中复制三次，从而提供最高级别的持久性。当主区域中发生故障时，Azure 存储空间将故障转移到辅助区域。GRS 在两个不同的区域中确保你的数据持久保存。


- **读取访问地域冗余存储 (RA-GRS)**。读取访问地域冗余存储将你的数据复制到一个辅助地理位置，同时提供对你在辅助位置中的数据的读访问权限。读取访问地域冗余存储允许你从主位置或辅助位置访问数据，以防其中一个位置不可用。

	> [AZURE.NOTE] 你可以在创建存储帐户后更改复制数据的方式，但请注意，如果你从 LRS 切换到 GRS 或 RA-GRS，可能会产生额外的一次性数据传输费用。如果你在创建帐户时选择了 GRS，则以后无法切换到任何其他类型的复制，反之亦然。
 

下表简要概述了 LRS、ZRS、GRS 和 RA-GRS 之间的差异，而后续章节将详细介绍每种类型的复制。


|复制策略|LRS|GRS|RA-GRS 
|--------------------|---|---|------
|数据在多个实施之间进行复制|否|是|是|
|可以从辅助位置和主位置读取数据|否|否|否|是
|在单独的节点上维护的数据副本数|3|6|6
 

有关存储帐户复制的定价信息，请参阅[存储定价详细信息](/home/features/storage/#price)

## 本地冗余存储 (LRS)

本地冗余存储在你创建存储帐户所在的区域中复制数据。为最大程度地提高持久性，针对你的存储帐户中的数据发出的每个请求将复制三次。这三个副本每个都驻留在不同的容错域和升级域中。容错域 (FD) 是一组代表出错的物理单元的节点，可将其视为属于同一物理机架的节点。升级域 (UD) 是一组在服务升级（部署）的过程中一起升级的节点。三个副本将分布在 UD 和 FD 上，以确保即使在硬件故障影响单个机架，以及在部署期间升级节点时，数据也可用。请求仅在写入所有三个副本后，才成功返回。

虽然对于大多数应用程序建议使用地域冗余存储，但是本地冗余存储在某些情况下可能需要：  

- 比 GRS 相比，LRS 成本更低，并且还提供更高的吞吐量。如果应用程序存储可轻松重构的数据，则可以选择 LRS。

- 由于数据管理需要，某些应用程序被限制为只能在单个区域内复制数据。

- 如果应用程序具有自己的地域复制策略，则可能不需要 GRS。



## 地域冗余存储 (GRS)。


地域冗余存储将数据复制到距主区域数百英里以外的辅助区域。如果你的存储帐户启用了 GRS，则即使遇到区域完全停电或导致主区域不可恢复的灾难，你的数据也能持久保存。 

对于启用了 GRS 的存储帐户，更新将首先提交到主区域，并在主区域复制三次。然后，更新将复制到辅助区域（也是复制三次），并且是在不同的容错域和升级域之间复制。

 
> [AZURE.NOTE] 使用 GRS 时，写入数据请求将异步复制到辅助区域。请务必注意，选择 GRS 不会影响针对主区域发出的请求的延迟。但是，由于异步复制涉及延迟，遇到区域性灾难时，如果无法将数据从主区域中恢复，则尚未复制到辅助区域的更改可能会丢失。
 
创建存储帐户时，可以为帐户选择主区域。辅助区域是根据主区域确定的且无法更改。下表显示了配对的主区域和辅助区域：

|主            |辅助        
| ---------------   |----------------
|中国北部   |中国东部
|中国东部   |中国北部 
 
## 读取访问地域冗余存储 (RA-GRS)

除了 GRS 所提供的在两个区域之间进行复制外，读取访问地域冗余存储还提供对辅助位置中的数据的只读访问权限，从而最大限度地提高了存储帐户的可用性。当主区域中的数据不可用时，应用程序可以从辅助区域读取数据。

当你启用对辅助区域中的数据的只读访问权限时，除了你的存储帐户的主终结点外，你还可以在辅助终结点上获取数据。辅助终结点与主终结点类似，但会在帐户名称后面追加后缀`-secondary`。例如，如果 Blob 服务的主终结点是  `myaccount.blob.core.chinacloudapi.cn`，则辅助终结点是  `myaccount-secondary.blob.core.chinacloudapi.cn`。存储帐户的访问密钥对于主终结点和辅助终结点是相同的。

## 后续步骤

- [Azure 存储空间可伸缩性和性能目标](/documentation/articles/storage-scalability-targets)

<!--HONumber=51-->